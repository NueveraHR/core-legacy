--- 
image: "node:latest"
stages: 
  - build
  - test

cache: 
  paths: 
    - node_modules/

variables:
  MONGO_URI: 'mongodb://mongo:27017/hrms'
  NODE_ENV: 'test'

services:
  - mongo:latest

install_dependencies: 
  stage: build
  artifacts: 
    paths: 
      - node_modules/
  script: 
    - "npm install"

unit_tests: 
  stage: test
  script: "npm test"
